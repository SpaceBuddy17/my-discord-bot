const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');

// 1Ô∏è‚É£ Create bot client
const client = new Client({ intents: [GatewayIntentBits.Guilds] });

// 2Ô∏è‚É£ Config from Railway secrets
const token = process.env.TOKEN;
const clientId = process.env.CLIENT_ID;
const guildId = process.env.GUILD_ID;

// 3Ô∏è‚É£ Define slash commands
const commands = [
  new SlashCommandBuilder()
    .setName('ping')
    .setDescription('Replies with Pong!'),
  new SlashCommandBuilder()
    .setName('welcome')
    .setDescription('Sends a branded welcome message')
].map(cmd => cmd.toJSON());

// 4Ô∏è‚É£ Register commands with Discord
const rest = new REST({ version: '10' }).setToken(token);
(async () => {
  try {
    console.log('Registering slash commands...');
    await rest.put(
      Routes.applicationGuildCommands(clientId, guildId),
      { body: commands }
    );
    console.log('Slash commands registered successfully!');
  } catch (error) {
    console.error(error);
  }
})();

// 5Ô∏è‚É£ Handle slash commands
client.on('interactionCreate', async interaction => {
  if (!interaction.isCommand()) return;

  if (interaction.commandName === 'ping') {
    await interaction.reply('Pong!');
  }

  if (interaction.commandName === 'welcome') {
    await interaction.reply({
      embeds: [{
        title: 'üëã Welcome!',
        description: 'Welcome to the server! We‚Äôre happy to have you here üòÑ',
        color: 0xFF9900,
        footer: { text: 'Your Brand Name' }
      }]
    });
  }
});

// 6Ô∏è‚É£ Log bot in
client.once('ready', () => console.log(`Logged in as ${client.user.tag}`));
client.login(token);

const {
  ActionRowBuilder,
  ButtonBuilder,
  ButtonStyle,
  EmbedBuilder
} = require('discord.js');

const sendRoleEmbeds = async (channel) => {

  // ===== MAN / WOMAN =====
  const genderEmbed = new EmbedBuilder()
    .setTitle('üë§ Man or Woman')
    .setDescription('Choose one')
    .setColor(0x5865F2);

  const genderRow = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('role_man').setLabel('Man').setStyle(ButtonStyle.Primary),
    new ButtonBuilder().setCustomId('role_woman').setLabel('Woman').setStyle(ButtonStyle.Primary)
  );

  // ===== NAME COLORS =====
  const colorsEmbed = new EmbedBuilder()
    .setTitle('üé® Name Color')
    .setDescription('Pick **one** color')
    .setColor(0xEB459E);

  const colorRow1 = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('color_red').setLabel('Red').setStyle(ButtonStyle.Danger),
    new ButtonBuilder().setCustomId('color_orange').setLabel('Orange').setStyle(ButtonStyle.Danger),
    new ButtonBuilder().setCustomId('color_yellow').setLabel('Yellow').setStyle(ButtonStyle.Success),
    new ButtonBuilder().setCustomId('color_green').setLabel('Green').setStyle(ButtonStyle.Success),
    new ButtonBuilder().setCustomId('color_blue').setLabel('Blue').setStyle(ButtonStyle.Primary)
  );

  const colorRow2 = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('color_purple').setLabel('Purple').setStyle(ButtonStyle.Primary),
    new ButtonBuilder().setCustomId('color_pink').setLabel('Pink').setStyle(ButtonStyle.Danger),
    new ButtonBuilder().setCustomId('color_brown').setLabel('Brown').setStyle(ButtonStyle.Secondary)
  );

  // ===== FOYER vs FOYAY =====
  const foyerEmbed = new EmbedBuilder()
    .setTitle('üî• FOYER vs FOYAY')
    .setDescription('Choose wisely')
    .setColor(0xED4245);

  const foyerRow = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('role_foyer').setLabel('FoYER').setStyle(ButtonStyle.Danger),
    new ButtonBuilder().setCustomId('role_foyay').setLabel('FoYAY').setStyle(ButtonStyle.Danger)
  );

  // ===== GAMING SYSTEMS =====
  const systemsEmbed = new EmbedBuilder()
    .setTitle('üéÆ Gaming Systems')
    .setDescription('Pick what you play on')
    .setColor(0x57F287);

  const systemsRow = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('role_gaming').setLabel('Gaming').setStyle(ButtonStyle.Secondary),
    new ButtonBuilder().setCustomId('role_pc').setLabel('PC').setStyle(ButtonStyle.Secondary),
    new ButtonBuilder().setCustomId('role_xbox').setLabel('Xbox').setStyle(ButtonStyle.Secondary),
    new ButtonBuilder().setCustomId('role_playstation').setLabel('Playstation').setStyle(ButtonStyle.Secondary),
    new ButtonBuilder().setCustomId('role_nintendo').setLabel('Nintendo').setStyle(ButtonStyle.Secondary)
  );

  // ===== GAMES =====
  const gamesEmbed = new EmbedBuilder()
    .setTitle('üïπÔ∏è Games')
    .setDescription('Choose your battles')
    .setColor(0xFEE75C);

  const gamesRow = new ActionRowBuilder().addComponents(
    new ButtonBuilder().setCustomId('role_helldiver').setLabel('Helldiver').setStyle(ButtonStyle.Success),
    new ButtonBuilder().setCustomId('role_cod').setLabel('COD Noob').setStyle(ButtonStyle.Success),
    new ButtonBuilder().setCustomId('role_dayz').setLabel('DayZ Survivor').setStyle(ButtonStyle.Success)
  );

  // ===== SEND IN ORDER =====
  await channel.send({ embeds: [genderEmbed], components: [genderRow] });
  await channel.send({ embeds: [colorsEmbed], components: [colorRow1, colorRow2] });
  await channel.send({ embeds: [foyerEmbed], components: [foyerRow] });
  await channel.send({ embeds: [systemsEmbed], components: [systemsRow] });
  await channel.send({ embeds: [gamesEmbed], components: [gamesRow] });
};

